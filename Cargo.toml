[workspace]
members = ["sqlx-core", "sqlx-macros", "sqlx-test", "examples/sqlite/todos"]

[workspace.package]
version = "0.7.1"
license = "MIT"
edition = "2021"
repository = "https://github.com/cortesi/musqlite"
keywords = ["database", "async", "sqlite"]
categories = ["database", "asynchronous"]
authors = ["Aldo Cortesi <aldo@corte.si>"]

[package]
name = "sqlx"
readme = "README.md"
documentation = "https://docs.rs/sqlx"
description = "A SQLite library"
version.workspace = true
license.workspace = true
edition.workspace = true
authors.workspace = true
repository.workspace = true

[package.metadata.docs.rs]
rustdoc-args = ["--cfg", "docsrs"]

[workspace.dependencies]
# Core Crates
sqlx-core = { version = "=0.7.1", path = "sqlx-core" }
sqlx-macros-core = { version = "=0.7.1", path = "sqlx-macros-core" }
sqlx-macros = { version = "=0.7.1", path = "sqlx-macros" }

# Facade crate (for reference from sqlx-cli)
sqlx = { version = "=0.7.1", path = "." }

# Common type integrations shared by multiple driver crates.
# These are optional unless enabled in a workspace crate.
bit-vec = "0.6.3"
chrono = { version = "0.4.22", default-features = false }
ipnetwork = "0.20.0"
mac_address = "1.1.5"
time = { version = "0.3.14", features = ["formatting", "parsing", "macros"] }
uuid = "1.1.2"

# Common utility crates
dotenvy = { version = "0.15.0", default-features = false }

[workspace.dependencies.tokio]
version = "1"
features = ["time", "net", "sync", "fs", "io-util", "rt"]
default-features = false

[dependencies]
sqlx-core = { workspace = true }
sqlx-macros = { workspace = true }

[dev-dependencies]
anyhow = "1.0.52"
time_ = { version = "0.3.2", package = "time" }
futures = "0.3.19"
env_logger = "0.9.0"
tokio = { version = "1.15.0", features = ["full"] }
dotenvy = "0.15.0"
trybuild = "1.0.53"
sqlx-test = { path = "./sqlx-test" }
paste = "1.0.6"
serde = { version = "1.0.132", features = ["derive"] }
serde_json = "1.0.73"
url = "2.2.2"
rand = "0.8.4"
rand_xoshiro = "0.6.0"
hex = "0.4.3"
tempdir = "0.3.7"
criterion = { version = "0.4", features = ["async_tokio"] }

# Needed to test SQLCipher
libsqlite3-sys = { version = "0.26", features = [
    "pkg-config",
    "vcpkg",
    "bundled",
    "unlock_notify",
    "bundled-sqlcipher",
] }

[[test]]
name = "sqlite"
path = "tests/sqlite/sqlite.rs"

[[test]]
name = "sqlite-types"
path = "tests/sqlite/types.rs"

[[test]]
name = "sqlite-describe"
path = "tests/sqlite/describe.rs"

[[test]]
name = "sqlite-derives"
path = "tests/sqlite/derives.rs"

[[test]]
name = "sqlite-error"
path = "tests/sqlite/error.rs"

[[test]]
name = "sqlite-sqlcipher"
path = "tests/sqlite/sqlcipher.rs"
